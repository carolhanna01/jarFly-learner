--- ./original/org/apache/commons/math3/linear/OpenMapRealVector.java	2022-12-17 01:32:54.000000000 +0000
+++ ./variant351/org/apache/commons/math3/linear/OpenMapRealVector.java	2022-12-17 04:21:54.000000000 +0000
@@ -136,7 +136,7 @@
         this.epsilon = epsilon;
         for (int key = 0; key < values.length; key++) {
             double value = values[key];
-            if (!isDefaultValue(value)) {
+            if (!equals(value)) {
                 entries.put(key, value);
             }
         }
@@ -510,10 +510,7 @@
             iter.advance();
             int key = iter.key();
             if (!entries.containsKey(key)) {
-                if (iter.value() > max) {
-                    max = iter.value();
-                }
-            }
+			}
         }
         return max;
     }
@@ -718,9 +715,11 @@
             return false;
         }
         OpenMapRealVector other = (OpenMapRealVector) obj;
-        if (virtualSize != other.virtualSize) {
-            return false;
-        }
+        if (other != null) {
+			if (virtualSize != other.virtualSize) {
+			    return false;
+			}
+		}
         if (Double.doubleToLongBits(epsilon) !=
             Double.doubleToLongBits(other.epsilon)) {
             return false;
