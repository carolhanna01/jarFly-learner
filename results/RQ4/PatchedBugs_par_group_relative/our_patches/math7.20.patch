--- ./original/org/apache/commons/math3/ode/AbstractIntegrator.java	2022-12-19 03:18:02.000000000 +0000
+++ ./variant346/org/apache/commons/math3/ode/AbstractIntegrator.java	2022-12-19 14:52:49.000000000 +0000
@@ -106,7 +106,10 @@
 
     /** {@inheritDoc} */
     public void addStepHandler(final StepHandler handler) {
-        stepHandlers.add(handler);
+        {
+			stepHandlers.add(handler);
+			eventsStates.clear();
+		}
     }
 
     /** {@inheritDoc} */
@@ -348,7 +351,10 @@
 
                 // handle the first part of the step, up to the event
                 for (final StepHandler handler : stepHandlers) {
-                    handler.handleStep(interpolator, isLastStep);
+                    {
+						handler.handleStep(interpolator, isLastStep);
+						System.arraycopy(eventY, 0, y, 0, y.length);
+					}
                 }
 
                 if (isLastStep) {
