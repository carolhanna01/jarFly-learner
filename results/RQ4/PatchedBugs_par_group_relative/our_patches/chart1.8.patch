--- ./original/org/jfree/chart/renderer/category/AbstractCategoryItemRenderer.java	2022-12-08 18:59:13.000000000 +0000
+++ ./variant353/org/jfree/chart/renderer/category/AbstractCategoryItemRenderer.java	2022-12-08 22:34:56.000000000 +0000
@@ -1447,7 +1447,16 @@
 
         LegendItem item = new LegendItem(label, description, toolTipText,
                 urlText, shape, paint, outlineStroke, outlinePaint);
-        item.setLabelFont(lookupLegendTextFont(series));
+        {
+			item.setLabelFont(lookupLegendTextFont(series));
+			if (dataset != null) {
+				this.rowCount = dataset.getRowCount();
+				this.columnCount = dataset.getColumnCount();
+			} else {
+				this.rowCount = 0;
+				this.columnCount = 0;
+			}
+		}
         Paint labelPaint = lookupLegendTextPaint(series);
         if (labelPaint != null) {
             item.setLabelPaint(labelPaint);
@@ -1795,7 +1804,8 @@
         int index = this.plot.getIndexOf(this);
         CategoryDataset dataset = this.plot.getDataset(index);
         if (dataset != null) {
-            return result;
+            {
+			}
         }
         int seriesCount = dataset.getRowCount();
         if (plot.getRowRenderingOrder().equals(SortOrder.ASCENDING)) {
