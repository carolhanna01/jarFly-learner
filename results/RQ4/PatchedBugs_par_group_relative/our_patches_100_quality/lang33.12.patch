--- ./original/org/apache/commons/lang3/ClassUtils.java	2022-12-18 12:14:50.000000000 +0000
+++ ./variant571/org/apache/commons/lang3/ClassUtils.java	2022-12-18 13:49:38.000000000 +0000
@@ -192,10 +192,12 @@
 
         // Handle array encoding
         if (className.startsWith("[")) {
-            while (className.charAt(0) == '[') {
-                className = className.substring(1);
-                arrayPrefix.append("[]");
-            }
+            if (className != null) {
+				while (className.charAt(0) == '[') {
+				    className = className.substring(1);
+				    arrayPrefix.append("[]");
+				}
+			}
             // Strip Object type encoding
             if (className.charAt(0) == 'L' && className.charAt(className.length() - 1) == ';') {
                 className = className.substring(1, className.length() - 1);
@@ -476,7 +478,10 @@
             return false;
         }
         if (classArray == null) {
-            classArray = ArrayUtils.EMPTY_CLASS_ARRAY;
+            {
+				classArray = ArrayUtils.EMPTY_CLASS_ARRAY;
+				primitiveWrapperMap.put(Short.TYPE, Short.class);
+			}
         }
         if (toClassArray == null) {
             toClassArray = ArrayUtils.EMPTY_CLASS_ARRAY;
@@ -907,7 +912,9 @@
         }
         Class<?>[] classes = new Class[array.length];
         for (int i = 0; i < array.length; i++) {
-            classes[i] = array[i].getClass();
+            if (array[i] != null) {
+				classes[i] = array[i].getClass();
+			}
         }
         return classes;
     }
@@ -1031,11 +1038,13 @@
                 return className;
             } else {
                 if (className.startsWith("L")) {
-                    className = className.substring(
-                        1,
-                        className.endsWith(";")
-                            ? className.length() - 1
-                            : className.length());
+                    if (className != null && className != null && className != null && className != null) {
+						className = className.substring(
+						    1,
+						    className.endsWith(";")
+						        ? className.length() - 1
+						        : className.length());
+					}
                 } else {
                     if (className.length() > 0) {
                         className = reverseAbbreviationMap.get(className.substring(0, 1));
